From ad6106ffe193ebb0f552eb201fae74af553b26c9 Mon Sep 17 00:00:00 2001
From: SVN-Git Migration <python-modules-team@lists.alioth.debian.org>
Date: Thu, 8 Oct 2015 09:05:15 -0700
Subject: fix_test_json_key_sorting

Patch-Name: fix_test_json_key_sorting.patch
---
 flask/testsuite/helpers.py | 34 ++++++++++++++++++++++++++++++++--
 1 file changed, 32 insertions(+), 2 deletions(-)

diff --git a/flask/testsuite/helpers.py b/flask/testsuite/helpers.py
index 636f67f..7de70c0 100644
--- a/flask/testsuite/helpers.py
+++ b/flask/testsuite/helpers.py
@@ -173,7 +173,33 @@ class JSONTestCase(FlaskTestCase):
         c = app.test_client()
         rv = c.get('/')
         lines = [x.strip() for x in rv.data.strip().decode('utf-8').splitlines()]
-        self.assert_equal(lines, [
+        sorted_by_str = [
+            '{',
+            '"values": {',
+            '"0": "foo",',
+            '"1": "foo",',
+            '"10": "foo",',
+            '"11": "foo",',
+            '"12": "foo",',
+            '"13": "foo",',
+            '"14": "foo",',
+            '"15": "foo",',
+            '"16": "foo",',
+            '"17": "foo",',
+            '"18": "foo",',
+            '"19": "foo",',
+            '"2": "foo",',
+            '"3": "foo",',
+            '"4": "foo",',
+            '"5": "foo",',
+            '"6": "foo",',
+            '"7": "foo",',
+            '"8": "foo",',
+            '"9": "foo"',
+            '}',
+            '}'
+        ]
+        sorted_by_int = [
             '{',
             '"values": {',
             '"0": "foo",',
@@ -198,8 +224,12 @@ class JSONTestCase(FlaskTestCase):
             '"19": "foo"',
             '}',
             '}'
-        ])
+        ]
 
+        try:
+            self.assert_equal(lines, sorted_by_int)
+        except AssertionError:
+            self.assert_equal(lines, sorted_by_str)
 
 class SendfileTestCase(FlaskTestCase):
 
